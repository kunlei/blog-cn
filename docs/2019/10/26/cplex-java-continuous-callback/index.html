<!DOCTYPE html>
<html lang="en" itemscope itemtype="http://schema.org/WebPage">
  <head>
    

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">

  <title>Using ContinuousCallback - 运筹优化</title>
  <meta name="description" content="Introduction In this post, we will explore how to use callback, specifically continuous callback, to retrieve and output information during the search process of the simplex and barrier optimizer. The CPLEX optimizer typically outputs a series of log information to the console revealing some of its search process, and many times it is enough. Occasionally, we want to have more information, or different information, than those default message, and callback is to the rescue.">
  <meta name="author" content="Kunlei Lian"/><script type="application/ld+json">
{
    "@context": "http://schema.org",
    "@type": "WebSite",
    "name": "运筹优化",
    
    "url": "https:\/\/kunlei.github.io\/blog-cn"
}
</script><script type="application/ld+json">
{
  "@context": "http://schema.org",
  "@type": "Organization",
  "name": "",
  "url": "https:\/\/kunlei.github.io\/blog-cn"
  
  
  
  
}
</script>
<script type="application/ld+json">
{
  "@context": "http://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [{
        "@type": "ListItem",
        "position": 1,
        "item": {
          "@id": "https:\/\/kunlei.github.io\/blog-cn",
          "name": "home"
        }
    },{
        "@type": "ListItem",
        "position": 3,
        "item": {
          "@id": "https:\/\/kunlei.github.io\/blog-cn\/2019\/10\/26\/cplex-java-continuous-callback\/",
          "name": "Using continuous callback"
        }
    }]
}
</script><script type="application/ld+json">
{
  "@context": "http://schema.org",
  "@type": "Article",
  "author": {
    "name" : "Kunlei Lian"
  },
  "headline": "Using ContinuousCallback",
  "description" : "Introduction In this post, we will explore how to use callback, specifically continuous callback, to retrieve and output information during the search process of the simplex and barrier optimizer. The CPLEX optimizer typically outputs a series of log information to the console revealing some of its search process, and many times it is enough. Occasionally, we want to have more information, or different information, than those default message, and callback is to the rescue.",
  "inLanguage" : "en",
  "wordCount":  941 ,
  "datePublished" : "2019-10-26T00:00:00",
  "dateModified" : "2019-10-26T00:00:00",
  "image" : "https:\/\/kunlei.github.io\/blog-cn\/img\/logo.png",
  "keywords" : [ "cplex, Java" ],
  "mainEntityOfPage" : "https:\/\/kunlei.github.io\/blog-cn\/2019\/10\/26\/cplex-java-continuous-callback\/",
  "publisher" : {
    "@type": "Organization",
    "name" : "https:\/\/kunlei.github.io\/blog-cn",
    "logo" : {
        "@type" : "ImageObject",
        "url" : "https:\/\/kunlei.github.io\/blog-cn\/img\/logo.png",
        "height" :  60 ,
        "width" :  60
    }
  }
}
</script>

<meta property="og:title" content="Using ContinuousCallback" />
<meta property="og:description" content="Introduction In this post, we will explore how to use callback, specifically continuous callback, to retrieve and output information during the search process of the simplex and barrier optimizer. The CPLEX optimizer typically outputs a series of log information to the console revealing some of its search process, and many times it is enough. Occasionally, we want to have more information, or different information, than those default message, and callback is to the rescue.">
<meta property="og:image" content="https://kunlei.github.io/blog-cn/img/logo.png" />
<meta property="og:url" content="https://kunlei.github.io/blog-cn/2019/10/26/cplex-java-continuous-callback/" />
<meta property="og:type" content="website" />
<meta property="og:site_name" content="运筹优化" />

  <meta name="twitter:title" content="Using ContinuousCallback" />
  <meta name="twitter:description" content="Introduction In this post, we will explore how to use callback, specifically continuous callback, to retrieve and output information during the search process of the simplex and barrier optimizer. The …">
  <meta name="twitter:image" content="https://kunlei.github.io/blog-cn/img/logo.png" />
  <meta name="twitter:card" content="summary" />
  <link href='https://kunlei.github.io/blog-cn/img/logo.png' rel='icon' type='image/x-icon'/>
  <meta name="generator" content="Hugo 0.57.1" />
  <link rel="alternate" href="https://kunlei.github.io/blog-cn/index.xml" type="application/rss+xml" title="运筹优化"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.10.0/katex.min.css" integrity="sha384-9eLZqc9ds8eNjO3TmqPeYcDj8n+Qfa4nuSiGYa6DjLNcv9BtN69ZIulL9+8CqC9Y" crossorigin="anonymous">
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.5.0/css/all.css" integrity="sha384-B4dIYHKNBt8Bc12p+WXckhzcICo0wtJAoU8YZTY5qE0Id1GSseTk6S+L3BlXeVIU" crossorigin="anonymous">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous"><link rel="stylesheet" href="https://kunlei.github.io/blog-cn/css/main.css" /><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic" />
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800" /><link rel="stylesheet" href="https://kunlei.github.io/blog-cn/css/syntax.css" /><link rel="stylesheet" href="https://kunlei.github.io/blog-cn/css/codeblock.css" /><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.2/photoswipe.min.css" integrity="sha384-h/L2W9KefUClHWaty3SLE5F/qvc4djlyR4qY3NUV5HGQBBW7stbcfff1+I/vmsHh" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.2/default-skin/default-skin.min.css" integrity="sha384-iD0dNku6PYSIQLyfTOpB06F2KCZJAKLOThS5HRe8b3ibhdEQ6eKsFf/EeFxdOt5R" crossorigin="anonymous"><link rel="stylesheet" href="/css/tweaks.css"/>

<script type="text/javascript" async
  src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.4/MathJax.js?config=TeX-MML-AM_CHTML">
</script>
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  tex2jax: {
    inlineMath: [['$','$'], ['\\(','\\)']],
    displayMath: [['$$','$$'], ['\[','\]']],
    processEscapes: true,
    processEnvironments: true,
    skipTags: ['script', 'noscript', 'style', 'textarea', 'pre','code'],
    TeX: { equationNumbers: { autoNumber: "AMS" },
    extensions: ["AMSmath.js", "AMSsymbols.js"] }
  }
});
</script>



<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'UA-124241468-1', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>


  </head>
  <body>
    <nav class="navbar navbar-default navbar-fixed-top navbar-custom">
  <div class="container-fluid">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#main-navbar">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="https://kunlei.github.io/blog-cn">运筹优化</a>
    </div>

    <div class="collapse navbar-collapse" id="main-navbar">
      <ul class="nav navbar-nav navbar-right">
        
          
            <li class="navlinks-container">
              <a class="navlinks-parent">博客</a>
              <div class="navlinks-children">
                
                  <a href="/blog-cn/blog-cn/page/book-list">阅读</a>
                
              </div>
            </li>
          
        
          
            <li class="navlinks-container">
              <a class="navlinks-parent">编程</a>
              <div class="navlinks-children">
                
                  <a href="/blog-cn/blog-cn/page/java-index">Java</a>
                
                  <a href="/blog-cn/blog-cn/page/cpp-index">C&#43;&#43;</a>
                
                  <a href="/blog-cn/blog-cn/page/cplex-index">CPLEX</a>
                
              </div>
            </li>
          
        
          
            <li class="navlinks-container">
              <a class="navlinks-parent">关于</a>
              <div class="navlinks-children">
                
                  <a href="https://kunlei.github.io/pagedown-resume">简历</a>
                
                  <a href="/blog-cn/blog-cn/page/about">关于</a>
                
              </div>
            </li>
          
        
          
            <li>
              <a title="标签" href="/blog-cn/tags">标签</a>
            </li>
          
        
          
            <li>
              <a title="English" href="https://kunlei.github.io">English</a>
            </li>
          
        

        

        
      </ul>
    </div>

    
      <div class="avatar-container">
        <div class="avatar-img-border">
          <a title="运筹优化" href="https://kunlei.github.io/blog-cn">
            <img class="avatar-img" src="https://kunlei.github.io/blog-cn/img/logo.png" alt="运筹优化" />
          </a>
        </div>
      </div>
    

  </div>
</nav>




    


<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

<div class="pswp__bg"></div>

<div class="pswp__scroll-wrap">
    
    <div class="pswp__container">
      <div class="pswp__item"></div>
      <div class="pswp__item"></div>
      <div class="pswp__item"></div>
    </div>
    
    <div class="pswp__ui pswp__ui--hidden">
    <div class="pswp__top-bar">
      
      <div class="pswp__counter"></div>
      <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
      <button class="pswp__button pswp__button--share" title="Share"></button>
      <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
      <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>
      
      
      <div class="pswp__preloader">
        <div class="pswp__preloader__icn">
          <div class="pswp__preloader__cut">
            <div class="pswp__preloader__donut"></div>
          </div>
        </div>
      </div>
    </div>
    <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
      <div class="pswp__share-tooltip"></div>
    </div>
    <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
    </button>
    <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
    </button>
    <div class="pswp__caption">
      <div class="pswp__caption__center"></div>
    </div>
    </div>
    </div>
</div>


  
  
  






  

  <header class="header-section ">
    
    <div class="intro-header no-img">
      <div class="container">
        <div class="row">
          <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
            <div class="post-heading">
              
                <h1>Using ContinuousCallback</h1>
              
              
              
              
                <span class="post-meta">
  
  
  <i class="fas fa-calendar"></i>&nbsp;Posted on October 26, 2019
  
  
    &nbsp;|&nbsp;<i class="fas fa-clock"></i>&nbsp;5&nbsp;minutes
  
  
    &nbsp;|&nbsp;<i class="fas fa-book"></i>&nbsp;941&nbsp;words
  
  
    
      &nbsp;|&nbsp;<i class="fas fa-user"></i>&nbsp;Kunlei Lian
    
  
  
</span>


              
            </div>
          </div>
        </div>
      </div>
    </div>
  </header>


    
<div class="container" role="main">
  <div class="row">
    <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
      <article role="main" class="blog-post">
        <nav id="TableOfContents">
<ul>
<li>
<ul>
<li><a href="#introduction">Introduction</a></li>
<li><a href="#model">Model</a></li>
<li><a href="#code">Code</a></li>
</ul></li>
</ul>
</nav>

        

<h2 id="introduction">Introduction</h2>

<p>In this post, we will explore how to use callback, specifically continuous callback, to retrieve and output information during the search process of the simplex and barrier optimizer.
The CPLEX optimizer typically outputs a series of log information to the console revealing some of its search process, and many times it is enough.
Occasionally, we want to have more information, or different information, than those default message, and callback is to the rescue.
We&rsquo;ll examine a simple linear programming (LP) example in this post and use callback to output some exciting information.</p>

<p>The callbacks in CPLEX Java API are nothing special but consist of various abstract classes shipped with predefined methods at our disposal.</p>

<h2 id="model">Model</h2>

<p>The formulation below involves only two variables and four simple constraints.
The purpose is to make it easy to comprehend in a two-dimensional space.
The feasible space is a nice octagon in this case.</p>

<p>$$
\begin{align}
  \text{max.} \quad &amp; 2 x_1 + 3x_2 \newline
  \text{s.t.} \quad &amp; x_1 + x_2 \geq 1 \newline
  &amp; -x_1 + x_2 \leq 2 \newline
  &amp; -x_1 + x_2 \geq -2 \newline
  &amp; x_1 + x_2 \leq 5 \newline
  &amp; 0 \leq x_1, x_2 \leq 3
\end{align}
$$</p>

<h2 id="code">Code</h2>

<p>The code below illustrates the process of creating and using callbacks in a typical model building and solving workflow.
First, an IloCplex object is instantiated, followed by the model building by row using IloLPMatrix.
We turn off the pre-solve step in order to allow Cplex to do the heavy lifting through simplex algorithm.
The default logging is also turned off.</p>

<p>Next, a callback object is created and added to the IloCplex object before we invoke the <em>cplex.solve()</em> method.
The class <em>ContinuousCallbackImpl</em> is a user-defined callback class that contains the procedure in which our exciting information is retrieved and printed to console.
Note that all it needs to do is to extend the abstract class <em>IloCplex.ContinuousCallback</em>, which provides a list of predefined functions at our disposal.</p>

<p>In the example, I want to record the trajectory of objective value during the Cplex search process, for which I create a list suitable for saving pairs of iteration number and corresponding objective value.
The objective value is increasing, as expected, in the trajectory, as shown in the output of the code below.</p>

<p>One thing worth mentioning is that, in the method <em>main()</em>, we can directly use lots of functions to retrieve information we want.
These functions are defined in the parent classes.</p>
<div class="highlight"><pre class="chroma"><code class="language-java" data-lang="java"><span class="ln">  1</span><span class="kn">import</span> <span class="nf">com</span><span class="p">.</span><span class="na">sun</span><span class="p">.</span><span class="na">tools</span><span class="p">.</span><span class="na">javac</span><span class="p">.</span><span class="na">util</span><span class="p">.</span><span class="na">Pair</span><span class="p">;</span>
<span class="ln">  2</span><span class="kn">import</span> <span class="nf">ilog</span><span class="p">.</span><span class="na">concert</span><span class="p">.</span><span class="na">IloColumnArray</span><span class="p">;</span>
<span class="ln">  3</span><span class="kn">import</span> <span class="nf">ilog</span><span class="p">.</span><span class="na">concert</span><span class="p">.</span><span class="na">IloException</span><span class="p">;</span>
<span class="ln">  4</span><span class="kn">import</span> <span class="nf">ilog</span><span class="p">.</span><span class="na">concert</span><span class="p">.</span><span class="na">IloLPMatrix</span><span class="p">;</span>
<span class="ln">  5</span><span class="kn">import</span> <span class="nf">ilog</span><span class="p">.</span><span class="na">concert</span><span class="p">.</span><span class="na">IloMPModeler</span><span class="p">;</span>
<span class="ln">  6</span><span class="kn">import</span> <span class="nf">ilog</span><span class="p">.</span><span class="na">concert</span><span class="p">.</span><span class="na">IloNumVar</span><span class="p">;</span>
<span class="ln">  7</span><span class="kn">import</span> <span class="nf">ilog</span><span class="p">.</span><span class="na">cplex</span><span class="p">.</span><span class="na">IloCplex</span><span class="p">;</span>
<span class="ln">  8</span><span class="kn">import</span> <span class="nf">ilog</span><span class="p">.</span><span class="na">cplex</span><span class="p">.</span><span class="na">IloCplex</span><span class="p">.</span><span class="na">Algorithm</span><span class="p">;</span>
<span class="ln">  9</span><span class="kn">import</span> <span class="nf">ilog</span><span class="p">.</span><span class="na">cplex</span><span class="p">.</span><span class="na">IloCplex</span><span class="p">.</span><span class="na">Param</span><span class="p">;</span>
<span class="ln"> 10</span><span class="kn">import</span> <span class="nf">ilog</span><span class="p">.</span><span class="na">cplex</span><span class="p">.</span><span class="na">IloCplex</span><span class="p">.</span><span class="na">Param</span><span class="p">.</span><span class="na">Preprocessing</span><span class="p">;</span>
<span class="ln"> 11</span><span class="kn">import</span> <span class="nf">java</span><span class="p">.</span><span class="na">util</span><span class="p">.</span><span class="na">ArrayList</span><span class="p">;</span>
<span class="ln"> 12</span><span class="kn">import</span> <span class="nf">java</span><span class="p">.</span><span class="na">util</span><span class="p">.</span><span class="na">List</span><span class="p">;</span>
<span class="ln"> 13</span>
<span class="ln"> 14</span><span class="kd">public</span> <span class="nf">class</span> <span class="n">ContinuousCallback</span> <span class="p">{</span>
<span class="ln"> 15</span>
<span class="ln"> 16</span>  <span class="kd">public</span> <span class="nf">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="p">(</span><span class="n">String</span><span class="p">[]</span> <span class="nf">args</span><span class="p">)</span> <span class="p">{</span>
<span class="ln"> 17</span>    <span class="k">try</span> <span class="p">{</span>
<span class="ln"> 18</span>      <span class="c1">// create a IloCplex object
</span><span class="ln"> 19</span><span class="c1"></span>      <span class="n">IloCplex</span> <span class="nf">cplex</span> <span class="o">=</span> <span class="k">new</span> <span class="n">IloCplex</span><span class="p">();</span>
<span class="ln"> 20</span>      
<span class="ln"> 21</span>      <span class="c1">// build the model by row using IloLPMatrix
</span><span class="ln"> 22</span><span class="c1"></span>      <span class="n">IloLPMatrix</span> <span class="nf">matrix</span> <span class="o">=</span> <span class="n">buildModelByRow</span><span class="p">(</span><span class="n">cplex</span><span class="p">);</span>
<span class="ln"> 23</span>
<span class="ln"> 24</span>      <span class="c1">// set CPLEX parameters
</span><span class="ln"> 25</span><span class="c1"></span>      <span class="n">cplex</span><span class="p">.</span><span class="na">setParam</span><span class="p">(</span><span class="n">Preprocessing</span><span class="p">.</span><span class="na">Presolve</span><span class="p">,</span> <span class="kc">false</span><span class="p">);</span>
<span class="ln"> 26</span>      <span class="n">cplex</span><span class="p">.</span><span class="na">setParam</span><span class="p">(</span><span class="n">Param</span><span class="p">.</span><span class="na">RootAlgorithm</span><span class="p">,</span> <span class="n">Algorithm</span><span class="p">.</span><span class="na">Primal</span><span class="p">);</span>
<span class="ln"> 27</span>      <span class="n">cplex</span><span class="p">.</span><span class="na">setOut</span><span class="p">(</span><span class="kc">null</span><span class="p">);</span>
<span class="ln"> 28</span>
<span class="ln"> 29</span>      <span class="c1">// initialize callback
</span><span class="ln"> 30</span><span class="c1"></span>      <span class="n">ContinuousCallbackImpl</span> <span class="nf">callback</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ContinuousCallbackImpl</span><span class="p">();</span>
<span class="ln"> 31</span>      <span class="n">cplex</span><span class="p">.</span><span class="na">use</span><span class="p">(</span><span class="n">callback</span><span class="p">);</span>
<span class="ln"> 32</span>
<span class="ln"> 33</span>      <span class="c1">// solve
</span><span class="ln"> 34</span><span class="c1"></span>      <span class="k">if</span> <span class="p">(</span><span class="n">cplex</span><span class="p">.</span><span class="na">solve</span><span class="p">())</span> <span class="p">{</span>
<span class="ln"> 35</span>        <span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&#34;Objective value trajectory: &#34;</span><span class="p">);</span>
<span class="ln"> 36</span>        <span class="n">callback</span><span class="p">.</span><span class="na">objs</span><span class="p">.</span><span class="na">forEach</span><span class="p">(</span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="o">::</span><span class="n">println</span><span class="p">);</span>
<span class="ln"> 37</span>      <span class="p">}</span>
<span class="ln"> 38</span>    <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="n">IloException</span> <span class="nf">e</span><span class="p">)</span> <span class="p">{</span>
<span class="ln"> 39</span>      <span class="n">e</span><span class="p">.</span><span class="na">printStackTrace</span><span class="p">();</span>
<span class="ln"> 40</span>    <span class="p">}</span>
<span class="ln"> 41</span>  <span class="p">}</span>
<span class="ln"> 42</span>
<span class="ln"> 43</span>  <span class="kd">private</span> <span class="nf">static</span> <span class="kd">class</span> <span class="nf">ContinuousCallbackImpl</span> <span class="kd">extends</span> <span class="nf">IloCplex</span><span class="p">.</span><span class="na">ContinuousCallback</span> <span class="p">{</span>
<span class="ln"> 44</span>    <span class="kd">private</span> <span class="nf">List</span><span class="o">&lt;</span><span class="n">Pair</span><span class="o">&lt;</span><span class="n">Integer</span><span class="p">,</span> <span class="n">Double</span><span class="o">&gt;&gt;</span> <span class="nf">objs</span><span class="p">;</span>
<span class="ln"> 45</span>
<span class="ln"> 46</span>    <span class="kd">public</span> <span class="nf">ContinuousCallbackImpl</span><span class="p">()</span> <span class="p">{</span>
<span class="ln"> 47</span>      <span class="n">objs</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ArrayList</span><span class="o">&lt;&gt;</span><span class="p">();</span>
<span class="ln"> 48</span>    <span class="p">}</span>
<span class="ln"> 49</span>
<span class="ln"> 50</span>    <span class="nd">@Override</span>
<span class="ln"> 51</span>    <span class="kd">protected</span> <span class="nf">void</span> <span class="n">main</span><span class="p">()</span> <span class="kd">throws</span> <span class="nf">IloException</span> <span class="p">{</span>
<span class="ln"> 52</span>      <span class="n">objs</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="k">new</span> <span class="n">Pair</span><span class="o">&lt;&gt;</span><span class="p">(</span><span class="n">getNiterations</span><span class="p">(),</span> <span class="n">getObjValue</span><span class="p">()));</span>
<span class="ln"> 53</span>
<span class="ln"> 54</span>      <span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&#34;Iteration: &#34;</span> <span class="o">+</span> <span class="n">getNiterations64</span><span class="p">());</span>
<span class="ln"> 55</span>      <span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&#34;\tCplexTime: &#34;</span> <span class="o">+</span> <span class="n">getCplexTime</span><span class="p">());</span>
<span class="ln"> 56</span>      <span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&#34;\tDetTime: &#34;</span> <span class="o">+</span> <span class="n">getDetTime</span><span class="p">());</span>
<span class="ln"> 57</span>      <span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&#34;\tStartTime: &#34;</span> <span class="o">+</span> <span class="n">getStartTime</span><span class="p">());</span>
<span class="ln"> 58</span>      <span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&#34;\tEndTime: &#34;</span> <span class="o">+</span> <span class="n">getEndTime</span><span class="p">());</span>
<span class="ln"> 59</span>      <span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&#34;\tStartDetTime: &#34;</span> <span class="o">+</span> <span class="n">getStartDetTime</span><span class="p">());</span>
<span class="ln"> 60</span>      <span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&#34;\tEndDetTime: &#34;</span> <span class="o">+</span> <span class="n">getEndDetTime</span><span class="p">());</span>
<span class="ln"> 61</span>      <span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&#34;\tNRows: &#34;</span> <span class="o">+</span> <span class="n">getNrows</span><span class="p">());</span>
<span class="ln"> 62</span>      <span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&#34;\tNCols: &#34;</span> <span class="o">+</span> <span class="n">getNcols</span><span class="p">());</span>
<span class="ln"> 63</span>      <span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&#34;\t\tObj: &#34;</span> <span class="o">+</span> <span class="n">getObjValue</span><span class="p">());</span>
<span class="ln"> 64</span>      <span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&#34;\t\tfeasible: &#34;</span> <span class="o">+</span> <span class="n">isFeasible</span><span class="p">());</span>
<span class="ln"> 65</span>      <span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&#34;\t\tdualFeasible: &#34;</span> <span class="o">+</span> <span class="n">isDualFeasible</span><span class="p">());</span>
<span class="ln"> 66</span>      <span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&#34;\t\tinfeasibility: &#34;</span> <span class="o">+</span> <span class="n">getInfeasibility</span><span class="p">());</span>
<span class="ln"> 67</span>      <span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&#34;\t\tdualInfeasibility: &#34;</span> <span class="o">+</span> <span class="n">getDualInfeasibility</span><span class="p">());</span>
<span class="ln"> 68</span>      <span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">();</span>
<span class="ln"> 69</span>    <span class="p">}</span>
<span class="ln"> 70</span>  <span class="p">}</span>
<span class="ln"> 71</span>
<span class="ln"> 72</span>  <span class="kd">private</span> <span class="nf">static</span> <span class="n">IloLPMatrix</span> <span class="nf">buildModelByRow</span><span class="p">(</span><span class="n">IloMPModeler</span> <span class="nf">modeler</span><span class="p">)</span> <span class="kd">throws</span> <span class="nf">IloException</span> <span class="p">{</span>
<span class="ln"> 73</span>    <span class="n">IloLPMatrix</span> <span class="nf">matrix</span> <span class="o">=</span> <span class="n">modeler</span><span class="p">.</span><span class="na">addLPMatrix</span><span class="p">();</span>
<span class="ln"> 74</span>
<span class="ln"> 75</span>    <span class="c1">// create decision variables
</span><span class="ln"> 76</span><span class="c1"></span>    <span class="kt">int</span> <span class="nf">numVars</span> <span class="o">=</span> <span class="n">2</span><span class="p">;</span>
<span class="ln"> 77</span>    <span class="kt">double</span><span class="p">[]</span> <span class="nf">lb</span> <span class="o">=</span> <span class="p">{</span><span class="n">0</span><span class="p">,</span> <span class="n">0</span><span class="p">};</span>
<span class="ln"> 78</span>    <span class="kt">double</span><span class="p">[]</span> <span class="nf">ub</span> <span class="o">=</span> <span class="p">{</span><span class="n">3</span><span class="p">,</span> <span class="n">3</span><span class="p">};</span>
<span class="ln"> 79</span>    <span class="n">IloColumnArray</span> <span class="nf">colArray</span> <span class="o">=</span> <span class="n">modeler</span><span class="p">.</span><span class="na">columnArray</span><span class="p">(</span><span class="n">matrix</span><span class="p">,</span> <span class="n">numVars</span><span class="p">);</span>
<span class="ln"> 80</span>    <span class="n">IloNumVar</span><span class="p">[]</span> <span class="nf">vars</span> <span class="o">=</span> <span class="n">modeler</span><span class="p">.</span><span class="na">numVarArray</span><span class="p">(</span><span class="n">colArray</span><span class="p">,</span> <span class="n">lb</span><span class="p">,</span> <span class="n">ub</span><span class="p">);</span>
<span class="ln"> 81</span>
<span class="ln"> 82</span>    <span class="c1">// add constraints
</span><span class="ln"> 83</span><span class="c1"></span>    <span class="kt">double</span><span class="p">[]</span> <span class="nf">lhs</span> <span class="o">=</span> <span class="p">{</span><span class="n">1</span><span class="p">,</span> <span class="o">-</span><span class="n">Double</span><span class="p">.</span><span class="na">MAX_VALUE</span><span class="p">,</span> <span class="o">-</span><span class="n">2</span><span class="p">,</span> <span class="o">-</span><span class="n">Double</span><span class="p">.</span><span class="na">MAX_VALUE</span><span class="p">};</span>
<span class="ln"> 84</span>    <span class="kt">double</span><span class="p">[]</span> <span class="nf">rhs</span> <span class="o">=</span> <span class="p">{</span><span class="n">Double</span><span class="p">.</span><span class="na">MAX_VALUE</span><span class="p">,</span> <span class="n">2</span><span class="p">,</span> <span class="n">Double</span><span class="p">.</span><span class="na">MAX_VALUE</span><span class="p">,</span> <span class="n">5</span><span class="p">};</span>
<span class="ln"> 85</span>    <span class="kt">int</span><span class="p">[][]</span> <span class="nf">indices</span> <span class="o">=</span> <span class="p">{{</span><span class="n">0</span><span class="p">,</span> <span class="n">1</span><span class="p">},</span>
<span class="ln"> 86</span>      <span class="p">{</span><span class="n">0</span><span class="p">,</span> <span class="n">1</span><span class="p">},</span>
<span class="ln"> 87</span>      <span class="p">{</span><span class="n">0</span><span class="p">,</span> <span class="n">1</span><span class="p">},</span>
<span class="ln"> 88</span>      <span class="p">{</span><span class="n">0</span><span class="p">,</span> <span class="n">1</span><span class="p">}</span>
<span class="ln"> 89</span>    <span class="p">};</span>
<span class="ln"> 90</span>    <span class="kt">double</span><span class="p">[][]</span> <span class="nf">values</span> <span class="o">=</span> <span class="p">{{</span><span class="n">1</span><span class="p">,</span> <span class="n">1</span><span class="p">},</span>
<span class="ln"> 91</span>        <span class="p">{</span><span class="o">-</span><span class="n">1</span><span class="p">,</span> <span class="n">1</span><span class="p">},</span>
<span class="ln"> 92</span>        <span class="p">{</span><span class="o">-</span><span class="n">1</span><span class="p">,</span> <span class="n">1</span><span class="p">},</span>
<span class="ln"> 93</span>        <span class="p">{</span><span class="n">1</span><span class="p">,</span> <span class="n">1</span><span class="p">}};</span>
<span class="ln"> 94</span>    <span class="n">matrix</span><span class="p">.</span><span class="na">addRows</span><span class="p">(</span><span class="n">lhs</span><span class="p">,</span> <span class="n">rhs</span><span class="p">,</span> <span class="n">indices</span><span class="p">,</span> <span class="n">values</span><span class="p">);</span>
<span class="ln"> 95</span>
<span class="ln"> 96</span>    <span class="c1">// create objective function
</span><span class="ln"> 97</span><span class="c1"></span>    <span class="kt">double</span><span class="p">[]</span> <span class="nf">objCoefs</span> <span class="o">=</span> <span class="p">{</span><span class="n">2</span><span class="p">,</span> <span class="n">3</span><span class="p">};</span>
<span class="ln"> 98</span>    <span class="n">modeler</span><span class="p">.</span><span class="na">addMaximize</span><span class="p">(</span><span class="n">modeler</span><span class="p">.</span><span class="na">scalProd</span><span class="p">(</span><span class="n">objCoefs</span><span class="p">,</span> <span class="n">vars</span><span class="p">));</span>
<span class="ln"> 99</span>
<span class="ln">100</span>    <span class="k">return</span> <span class="n">matrix</span><span class="p">;</span>
<span class="ln">101</span>  <span class="p">}</span>
<span class="ln">102</span><span class="p">}</span></code></pre></div>
<p>Below shows the output of the example code.</p>

<pre><code>Iteration: 1
	CplexTime: 1.571946910691205E9
	DetTime: 0.001346588134765625
	StartTime: 1.571946910689231E9
	EndTime: 1.0E75
	StartDetTime: 2.288818359375E-4
	EndDetTime: 1.0E75
	NRows: 4
	NCols: 2
		Obj: 2.0
		feasible: false
		dualFeasible: true
		infeasibility: 0.0
		dualInfeasibility: 0.0

Iteration: 2
	CplexTime: 1.57194691069484E9
	DetTime: 0.0025644302368164062
	StartTime: 1.571946910689231E9
	EndTime: 1.0E75
	StartDetTime: 2.288818359375E-4
	EndDetTime: 1.0E75
	NRows: 4
	NCols: 2
		Obj: 4.0
		feasible: true
		dualFeasible: false
		infeasibility: 0.0
		dualInfeasibility: 5.0

Iteration: 3
	CplexTime: 1.5719469106953E9
	DetTime: 0.002979278564453125
	StartTime: 1.571946910689231E9
	EndTime: 1.0E75
	StartDetTime: 2.288818359375E-4
	EndDetTime: 1.0E75
	NRows: 4
	NCols: 2
		Obj: 9.0
		feasible: true
		dualFeasible: false
		infeasibility: 0.0
		dualInfeasibility: 3.0

Iteration: 4
	CplexTime: 1.57194691069592E9
	DetTime: 0.0033283233642578125
	StartTime: 1.571946910689231E9
	EndTime: 1.0E75
	StartDetTime: 2.288818359375E-4
	EndDetTime: 1.0E75
	NRows: 4
	NCols: 2
		Obj: 12.0
		feasible: true
		dualFeasible: false
		infeasibility: 0.0
		dualInfeasibility: 1.0

Iteration: 5
	CplexTime: 1.571946910696485E9
	DetTime: 0.003772735595703125
	StartTime: 1.571946910689231E9
	EndTime: 1.0E75
	StartDetTime: 2.288818359375E-4
	EndDetTime: 1.0E75
	NRows: 4
	NCols: 2
		Obj: 13.0
		feasible: true
		dualFeasible: true
		infeasibility: 0.0
		dualInfeasibility: 0.0

Objective value trajectory: 
Pair[1,2.0]
Pair[2,4.0]
Pair[3,9.0]
Pair[4,12.0]
Pair[5,13.0]

Process finished with exit code 0
</code></pre>


        
          <div class="blog-tags">
            
              <a href="https://kunlei.github.io/blog-cn/tags/cplex/">cplex</a>&nbsp;
            
              <a href="https://kunlei.github.io/blog-cn/tags/java/">Java</a>&nbsp;
            
          </div>
        

        
            <hr/>
            <section id="social-share">
              <div class="list-inline footer-links">
                

<div class="share-box" aria-hidden="true">
    <ul class="share">
      
      <li>
        <a href="//twitter.com/share?url=https%3a%2f%2fkunlei.github.io%2fblog-cn%2f2019%2f10%2f26%2fcplex-java-continuous-callback%2f&amp;text=Using%20ContinuousCallback&amp;via=" target="_blank" title="Share on Twitter">
          <i class="fab fa-twitter"></i>
        </a>
      </li>
  
      
      <li>
        <a href="//www.facebook.com/sharer/sharer.php?u=https%3a%2f%2fkunlei.github.io%2fblog-cn%2f2019%2f10%2f26%2fcplex-java-continuous-callback%2f" target="_blank" title="Share on Facebook">
          <i class="fab fa-facebook"></i>
        </a>
      </li>
  
      
      <li>
        <a href="//reddit.com/submit?url=https%3a%2f%2fkunlei.github.io%2fblog-cn%2f2019%2f10%2f26%2fcplex-java-continuous-callback%2f&amp;title=Using%20ContinuousCallback" target="_blank" title="Share on Reddit">
          <i class="fab fa-reddit"></i>
        </a>
      </li>
  
      
      <li>
        <a href="//www.linkedin.com/shareArticle?url=https%3a%2f%2fkunlei.github.io%2fblog-cn%2f2019%2f10%2f26%2fcplex-java-continuous-callback%2f&amp;title=Using%20ContinuousCallback" target="_blank" title="Share on LinkedIn">
          <i class="fab fa-linkedin"></i>
        </a>
      </li>
  
      
      <li>
        <a href="//www.stumbleupon.com/submit?url=https%3a%2f%2fkunlei.github.io%2fblog-cn%2f2019%2f10%2f26%2fcplex-java-continuous-callback%2f&amp;title=Using%20ContinuousCallback" target="_blank" title="Share on StumbleUpon">
          <i class="fab fa-stumbleupon"></i>
        </a>
      </li>
  
      
      <li>
        <a href="//www.pinterest.com/pin/create/button/?url=https%3a%2f%2fkunlei.github.io%2fblog-cn%2f2019%2f10%2f26%2fcplex-java-continuous-callback%2f&amp;description=Using%20ContinuousCallback" target="_blank" title="Share on Pinterest">
          <i class="fab fa-pinterest"></i>
        </a>
      </li>
    </ul>
  </div>
  

              </div>
            </section>
        

        
          
          
          <h4 class="see-also">See also</h4>
          <ul>
          
            <li><a href="/blog-cn/2019/10/20/cplex-java-build-model-by-column/">Build Optimization Models by Column using CPLEX Java API</a></li>
          
            <li><a href="/blog-cn/2019/10/20/cplex-java-build-model-by-column-lpmatrix/">Build Optimization Models by Column with IloLPMatrix using CPLEX Java API</a></li>
          
            <li><a href="/blog-cn/2019/10/19/cplex-java-build-model-by-row-lpmatrix/">Build Optimization Models by Row with IloLPMatrix using CPLEX Java API</a></li>
          
          </ul>
          
        
      </article>

      
        <ul class="pager blog-pager">
          
            <li class="previous">
              <a href="https://kunlei.github.io/blog-cn/2019/10/20/cplex-java-build-model-by-column/" data-toggle="tooltip" data-placement="top" title="Build Optimization Models by Column using CPLEX Java API">&larr; Previous Post</a>
            </li>
          
          
            <li class="next">
              <a href="https://kunlei.github.io/blog-cn/2019/10/26/all-the-wrong-moves/" data-toggle="tooltip" data-placement="top" title="All the Wrong Moves">Next Post &rarr;</a>
            </li>
          
        </ul>
      


      
        
          
          <div class="disqus-comments">                  
            <button id="show-comments" class="btn btn-default" type="button">Show <span class="disqus-comment-count" data-disqus-url="https://kunlei.github.io/blog-cn/2019/10/26/cplex-java-continuous-callback">comments</span></button>
            <div id="disqus_thread"></div>

            <script type="text/javascript">
              var disqus_config = function () {
              this.page.url = 'https:\/\/kunlei.github.io\/blog-cn\/2019\/10\/26\/cplex-java-continuous-callback';
            };

          </script>
          </div>
          
        
        
      

    </div>
  </div>
</div>

      
<footer>
  <div class="container">
    <div class="row">
      <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
        <ul class="list-inline text-center footer-links">
          
              <li>
                <a href="mailto:kunlei1987@gmail.com" title="Email me">
                  <span class="fa-stack fa-lg">
                    <i class="fas fa-circle fa-stack-2x"></i>
                    <i class="fas fa-envelope fa-stack-1x fa-inverse"></i>
                  </span>
                </a>
              </li>
              <li>
                <a href="https://github.com/kunlei" title="GitHub">
                  <span class="fa-stack fa-lg">
                    <i class="fas fa-circle fa-stack-2x"></i>
                    <i class="fab fa-github fa-stack-1x fa-inverse"></i>
                  </span>
                </a>
              </li>
              <li>
                <a href="https://linkedin.com/in/kunlei-lian-ba55a73b" title="LinkedIn">
                  <span class="fa-stack fa-lg">
                    <i class="fas fa-circle fa-stack-2x"></i>
                    <i class="fab fa-linkedin fa-stack-1x fa-inverse"></i>
                  </span>
                </a>
              </li>
          
          <li>
            <a href="" title="RSS">
              <span class="fa-stack fa-lg">
                <i class="fas fa-circle fa-stack-2x"></i>
                <i class="fas fa-rss fa-stack-1x fa-inverse"></i>
              </span>
            </a>
          </li>
          
        </ul>
        <p class="credits copyright text-muted">
          
            
              <a href="https://kunlei.github.io">Kunlei Lian</a>
            
          

          &nbsp;&bull;&nbsp;&copy;
          
            2019
          

          
            &nbsp;&bull;&nbsp;
            <a href="https://kunlei.github.io/blog-cn">运筹优化</a>
          
        </p>
        
        <p class="credits theme-by text-muted">
          <a href="https://gohugo.io">Hugo v0.57.1</a> powered &nbsp;&bull;&nbsp; Theme <a href="https://github.com/halogenica/beautifulhugo">Beautiful Hugo</a> adapted from <a href="https://deanattali.com/beautiful-jekyll/">Beautiful Jekyll</a>
          
        </p>
      </div>
    </div>
  </div>
</footer><script src="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.10.0/katex.min.js" integrity="sha384-K3vbOmF2BtaVai+Qk37uypf7VrgBubhQreNQe9aGsz9lB63dIFiQVlJbr92dw2Lx" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.10.0/contrib/auto-render.min.js" integrity="sha384-kmZOZB5ObwgQnS/DuDg6TScgOiWWBiVt0plIRkZCmE6rDZGrEOQeHM5PcHi+nyqe" crossorigin="anonymous"></script>
<script src="https://code.jquery.com/jquery-1.12.4.min.js" integrity="sha256-ZosEbRLbNQzLpnKIkEdrPv7lOy9C27hHQ+Xp8a4MxAQ=" crossorigin="anonymous"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

<script src="https://kunlei.github.io/blog-cn/js/main.js"></script><script> renderMathInElement(document.body); </script><script src="https://cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.2/photoswipe.min.js" integrity="sha384-QELNnmcmU8IR9ZAykt67vGr9/rZJdHbiWi64V88fCPaOohUlHCqUD/unNN0BXSqy" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.2/photoswipe-ui-default.min.js" integrity="sha384-m67o7SkQ1ALzKZIFh4CiTA8tmadaujiTa9Vu+nqPSwDOqHrDmxLezTdFln8077+q" crossorigin="anonymous"></script><script src="https://kunlei.github.io/blog-cn/js/load-photoswipe.js"></script>








<script type="text/javascript">
$(function(){
  $('#show-comments').on('click', function(){
    var disqus_shortname = 'orinaction';
      
    (function() {
      var disqus = document.createElement('script'); 
      disqus.type = 'text/javascript'; 
      disqus.async = true;
      disqus.src = '//' + disqus_shortname + '.disqus.com/embed.js';
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(disqus);
    })();
      
    $(this).hide(); 
    });
  });
      
</script>
<script id="dsq-count-scr" src="//orinaction.disqus.com/count.js" async></script>


<script>
(function() {
  var toc = document.getElementById('TableOfContents');
  if (!toc) return;
  do {
    var li, ul = toc.querySelector('ul');
    if (ul.childElementCount !== 1) break;
    li = ul.firstElementChild;
    if (li.tagName !== 'LI') break;
    
    ul.outerHTML = li.innerHTML;
  } while (toc.childElementCount >= 1);
})();
</script>

    
  </body>
</html>

